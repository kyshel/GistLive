<meta charset="utf-8">

<div class="nav"></div>
<div class="container">
	<h1 class="pro_name"></h1>
	<div class="raw">
		<iframe id="iframe_raw" src=""></iframe>
	</div>
	<div class="readme">
		
	</div>
	<div class="code"></div>
		<pre id="pre_code">
			
		</pre>
	<div class="license"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript">
	function loadgist(gistid) {
		$.ajax({
			url: 'https://api.github.com/gists/'+gistid,
			type: 'GET',
			dataType: 'jsonp'
		}).success( function(gistdata) {
			var objects = [];
			console.log(gistdata);
			var files= gistdata.data.files;

			for (file in files) {
				if (files.hasOwnProperty(file)) {
					var filename = files[file].filename;
					var filecontent = files[file].content;
					var object_nc={
						filename:filename,
						filecontent:filecontent
					};
					objects.push(object_nc);
				}
			}
			if (objects.length > 0) {
				DoSomethingWith(objects,gistdata.data.id)
			}
		}).error( function(e) {
		});
	}

	function DoSomethingWith(objects,gistid) {
		for (index in objects) {
			console.log(index+':'+objects[index].filename);	
			if (objects[index].filename == 'index.html') {
				document.getElementById('iframe_raw').src = "/raw/?id="+gistid;
				//document.getElementById("pre_code").innerHTML = objects[index].filecontent;

			}
		}
	}

	function getParameterByName(name, url) {
		if (!url) url = window.location.href;
		name = name.replace(/[\[\]]/g, "\\$&");
		var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
		results = regex.exec(url);
		if (!results) return null;
		if (!results[2]) return '';
		return decodeURIComponent(results[2].replace(/\+/g, " "));
	}


	var gistid=getParameterByName('id');
	loadgist(gistid);

</script>
